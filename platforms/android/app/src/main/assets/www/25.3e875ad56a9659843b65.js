(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{bNZI:function(n,l,t){"use strict";t.r(l);var o=t("CcnG"),e=t("gTw3"),u=t("ZZ/e"),i=t("23JA"),r=function(){function n(n,l,t,o,e){this.navCtrl=n,this.plt=l,this.geolocation=t,this.storage=o,this.nativeGeocoder=e,this.currentMapTrack=null,this.isTracking=!1,this.trackedRoute=[],this.previousTracks=[],this.geoencoderOptions={useLocale:!0,maxResults:5},this.markers=[],this.locations=[]}return n.prototype.ngOnInit=function(){},n.prototype.ionViewDidEnter=function(){var n=this;this.plt.ready().then(function(){n.loadHistoricRoutes(),n.map=new google.maps.Map(document.getElementById("map"),{center:{lat:-34.9011,lng:-56.1645},zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0}),n.geolocation.getCurrentPosition().then(function(l){var t={lat:l.coords.latitude,lng:l.coords.longitude},o=new google.maps.Marker({position:t,map:n.map,title:"you are here!",animation:google.maps.Animation.DROP});n.markers.push(o),n.map.setCenter(t),n.map.setZoom(16)}).catch(function(n){console.log("Error getting location",n)})})},n.prototype.loadHistoricRoutes=function(){var n=this;this.storage.get("routes").then(function(l){l&&(n.previousTracks=l)})},n.prototype.startTracking=function(){window.app.backgroundGeolocation.start()},n.prototype.getGeoencoder=function(n,l){var t=this;this.nativeGeocoder.reverseGeocode(n,l,this.geoencoderOptions).then(function(n){t.geoAddress=t.generateAddress(n[0]),console.log("this.geoAddress",t.geoAddress)}).catch(function(n){alert("Error getting location"+JSON.stringify(n))})},n.prototype.generateAddress=function(n){var l=[],t="";for(var o in n)l.push(n[o]);for(var e in l.reverse(),l)l[e].length&&(t+=l[e]+", ");return t.slice(0,-2)},n.prototype.redrawPath=function(n){this.currentMapTrack&&this.currentMapTrack.setMap(null),n.length>1&&(google,this.currentMapTrack=new google.maps.Polyline({path:n,geodesic:!0,strokeColor:"#7044ff",strokeOpacity:1,strokeWeight:3}),this.currentMapTrack.setMap(this.map))},n.prototype.stopTracking=function(){window.app.backgroundGeolocation.stop()},n.prototype.showHistoryRoute=function(n){console.log(n),this.redrawPath(n)},n.prototype.GetLocations=function(){this.locations=null==JSON.parse(localStorage.getItem("location"))?[]:JSON.parse(localStorage.getItem("location"))},n}(),a=function(){return function(){}}(),c=t("pMnS"),s=t("bAmN"),p=t("oBZk"),b=t("Ip0R"),g=t("jWFl"),h=t("OOyK"),f=t("ZYCi"),d=t("iw74"),m=t("jKJn"),k=t("xoVG"),y=o.nb({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{width:100%;height:450px}#markerLayer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:.5s infinite alternate pulse;-webkit-animation:.5s infinite alternate pulse;transform-origin:center;-webkit-transform-origin:center}"],s.a],data:{}});function w(n){return o.Jb(0,[(n()(),o.pb(0,0,null,null,4,"ion-button",[["color","tertiary"],["expand","full"],["size","default"],["type","button"]],null,[[null,"click"]],function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.startTracking()&&o),o},p.O,p.d)),o.ob(1,49152,null,0,u.m,[o.h,o.k,o.z],{color:[0,"color"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(n()(),o.pb(2,0,null,0,1,"ion-icon",[["name","locate"]],null,null,null,p.Z,p.o)),o.ob(3,49152,null,0,u.E,[o.h,o.k,o.z],{name:[0,"name"]},null),(n()(),o.Hb(-1,0,[" Start "]))],function(n,l){n(l,1,0,"tertiary","full","default","button"),n(l,3,0,"locate")},null)}function x(n){return o.Jb(0,[(n()(),o.pb(0,0,null,null,4,"ion-button",[["color","tertiary"],["expand","full"],["size","default"],["type","button"]],null,[[null,"click"]],function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.stopTracking()&&o),o},p.O,p.d)),o.ob(1,49152,null,0,u.m,[o.h,o.k,o.z],{color:[0,"color"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(n()(),o.pb(2,0,null,0,1,"ion-icon",[["name","hand"]],null,null,null,p.Z,p.o)),o.ob(3,49152,null,0,u.E,[o.h,o.k,o.z],{name:[0,"name"]},null),(n()(),o.Hb(-1,0,[" Stop "]))],function(n,l){n(l,1,0,"tertiary","full","default","button"),n(l,3,0,"hand")},null)}function v(n){return o.Jb(0,[(n()(),o.pb(0,0,null,null,8,"ion-item",[["lines","full"]],null,null,null,p.db,p.r)),o.ob(1,49152,null,0,u.J,[o.h,o.k,o.z],{lines:[0,"lines"]},null),(n()(),o.pb(2,0,null,0,3,"ion-label",[],null,null,null,p.eb,p.t)),o.ob(3,49152,null,0,u.P,[o.h,o.k,o.z],null,null),(n()(),o.Hb(4,0,[" ",", "," Waypoints "])),o.Db(5,1),(n()(),o.pb(6,0,null,0,2,"ion-button",[["size","small"],["type","button"]],null,[[null,"click"]],function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.showHistoryRoute(n.context.$implicit.path)&&o),o},p.O,p.d)),o.ob(7,49152,null,0,u.m,[o.h,o.k,o.z],{size:[0,"size"],type:[1,"type"]},null),(n()(),o.Hb(-1,0,["View Route"]))],function(n,l){n(l,1,0,"full"),n(l,7,0,"small","button")},function(n,l){var t=o.Ib(l,4,0,n(l,5,0,o.zb(l.parent,0),l.context.$implicit.finished));n(l,4,0,t,l.context.$implicit.path.length)})}function O(n){return o.Jb(0,[o.Bb(0,b.d,[o.u]),(n()(),o.pb(1,0,null,null,1,"app-header",[],null,null,null,g.b,g.a)),o.ob(2,114688,null,0,h.a,[f.m,u.f,d.b,m.a,k.a],null,null),(n()(),o.pb(3,0,null,null,15,"ion-content",[],null,null,null,p.U,p.j)),o.ob(4,49152,null,0,u.w,[o.h,o.k,o.z],null,null),(n()(),o.pb(5,0,null,0,0,"div",[["id","map"]],null,null,null,null,null)),(n()(),o.gb(16777216,null,0,1,null,w)),o.ob(7,16384,null,0,b.k,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.gb(16777216,null,0,1,null,x)),o.ob(9,16384,null,0,b.k,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.pb(10,0,null,0,8,"ion-list",[],null,null,null,p.gb,p.u)),o.ob(11,49152,null,0,u.Q,[o.h,o.k,o.z],null,null),(n()(),o.pb(12,0,null,0,4,"ion-list-header",[],null,null,null,p.fb,p.v)),o.ob(13,49152,null,0,u.R,[o.h,o.k,o.z],null,null),(n()(),o.pb(14,0,null,0,2,"ion-label",[],null,null,null,p.eb,p.t)),o.ob(15,49152,null,0,u.P,[o.h,o.k,o.z],null,null),(n()(),o.Hb(-1,0,["Previous Tracks History"])),(n()(),o.gb(16777216,null,0,1,null,v)),o.ob(18,278528,null,0,b.j,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var t=l.component;n(l,2,0),n(l,7,0,!t.isTracking),n(l,9,0,t.isTracking),n(l,18,0,t.previousTracks)},null)}function z(n){return o.Jb(0,[(n()(),o.pb(0,0,null,null,1,"app-location-tracking",[],null,null,null,O,y)),o.ob(1,114688,null,0,r,[u.Kb,u.Nb,e.a,d.b,i.a],null,null)],function(n,l){n(l,1,0)},null)}var T=o.lb("app-location-tracking",r,z,{},{},[]),M=t("gIcY"),J=t("qxEu");t.d(l,"LocationTrackingPageModuleNgFactory",function(){return I});var I=o.mb(a,[],function(n){return o.wb([o.xb(512,o.j,o.bb,[[8,[c.a,T]],[3,o.j],o.x]),o.xb(4608,b.m,b.l,[o.u,[2,b.s]]),o.xb(4608,M.t,M.t,[]),o.xb(4608,u.c,u.c,[o.z,o.g]),o.xb(4608,u.Jb,u.Jb,[u.c,o.j,o.q]),o.xb(4608,u.Ob,u.Ob,[u.c,o.j,o.q]),o.xb(1073742336,b.b,b.b,[]),o.xb(1073742336,M.r,M.r,[]),o.xb(1073742336,M.e,M.e,[]),o.xb(1073742336,u.Fb,u.Fb,[]),o.xb(1073742336,f.q,f.q,[[2,f.w],[2,f.m]]),o.xb(1073742336,J.a,J.a,[]),o.xb(1073742336,a,a,[]),o.xb(1024,f.k,function(){return[[{path:"",component:r}]]},[])])})}}]);