{"version":3,"sources":["webpack:///./src/app/layout/myaccount/booking-history/booking-history.module.ts","webpack:///./src/app/layout/myaccount/booking-history/booking-history.page.html","webpack:///./src/app/layout/myaccount/booking-history/booking-history.page.scss","webpack:///./src/app/layout/myaccount/booking-history/booking-history.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEe;AACkB;AACT;AAErE,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,wEAAkB;KAC9B;CACF,CAAC;AAaF;IAAA;IAAuC,CAAC;IAA3B,wBAAwB;QAXpC,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAC7B,mFAAgB;gBAChB,kFAAiB;aAClB;YACD,YAAY,EAAE,CAAC,wEAAkB,CAAC;SACnC,CAAC;OACW,wBAAwB,CAAG;IAAD,+BAAC;CAAA;AAAH;;;;;;;;;;;;AC7BrC,uOAAuO,mBAAmB,4WAA4W,2HAA2H,mBAAmB,uOAAuO,YAAY,mBAAmB,yDAAyD,YAAY,KAAK,mBAAmB,MAAM,SAAS,mBAAmB,iDAAiD,aAAa,iFAAiF,gBAAgB,oCAAoC,eAAe,kBAAkB,mEAAmE,kBAAkB,gBAAgB,KAAK,eAAe,OAAO,GAAG,aAAa,2EAA2E,YAAY,WAAW,gFAAgF,2EAA2E,YAAY,2EAA2E,aAAa,gBAAgB,WAAW,qBAAqB,+FAA+F,0IAA0I,YAAY,2EAA2E,aAAa,gBAAgB,WAAW,mBAAmB,kGAAkG,uEAAuE,YAAY,iBAAiB,wCAAwC,mBAAmB,wgB;;;;;;;;;;;ACA1/E,4BAA4B,yBAAyB,EAAE,iBAAiB,iCAAiC,EAAE,wBAAwB,gCAAgC,EAAE,uBAAuB,wBAAwB,qBAAqB,4BAA4B,EAAE,iBAAiB,sBAAsB,EAAE,+CAA+C,m8B;;;;;;;;;;;;;;;;;;;;;;;;ACA7S;AACT;AAE2B;AACI;AACc;AAC/B;AACiB;AAC/B;AAOzC;IAQE,4BACU,OAAgB,EACjB,YAA0B,EACzB,cAA8B,EAC9B,oBAA0C,EAC3C,qBAA4C,EAC3C,cAA8B,EAC9B,MAAc;QANd,YAAO,GAAP,OAAO,CAAS;QACjB,iBAAY,GAAZ,YAAY,CAAc;QACzB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,yBAAoB,GAApB,oBAAoB,CAAsB;QAC3C,0BAAqB,GAArB,qBAAqB,CAAuB;QAC3C,mBAAc,GAAd,cAAc,CAAgB;QAC9B,WAAM,GAAN,MAAM,CAAQ;QAXxB,SAAI,GAAG,CAAC,CAAC;QACT,iBAAY,GAAG,EAAE,CAAC;QAClB,oBAAe,GAAG,EAAE,CAAC;QACrB,iBAAY,GAAY,KAAK,CAAC;IAS1B,CAAC;IAEL,qCAAQ,GAAR;QAAA,iBAOC;QANC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YACrC,gCAAgC;YAChC,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;YACxB,KAAI,CAAC,qBAAqB,EAAE,CAAC;QAE/B,CAAC,CAAC,CAAC;IACL,CAAC;IACD,+CAAkB,GAAlB;QAAA,iBA4BC;QA3BC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;YACnD,MAAM,EAAE,qBAAqB;YAC7B,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,KAAK;oBACX,OAAO,EAAE;wBACP,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;wBACjB,KAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC/B,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,OAAO,EAAE;wBACP,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC;wBAClB,KAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC/B,CAAC;iBACF,EAAE;oBACD,IAAI,EAAE,WAAW;oBACjB,OAAO,EAAE;wBACP,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC;wBAClB,KAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC/B,CAAC;iBACF;aAAC;SACL,CAAC,CAAC,IAAI,CAAC,qBAAW;YACjB,WAAW,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IAEL,CAAC;IACD,kDAAqB,GAArB,UAAsB,KAAM;QAA5B,iBA8BC;QA7BC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,YAAY,GAAG;YACjB,MAAM,EAAE,cAAc;YACtB,SAAS,EAAE,IAAI,CAAC,MAAM;YACtB,WAAW,EAAE,IAAI,CAAC,MAAM;YACxB,MAAM,EAAE,IAAI,CAAC,IAAI;YACjB,OAAO,EAAE,CAAC;SAEX,CAAC;QACF,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,SAAS,CAClE,aAAG;YACD,4EAA4E;YAC5E,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,EAAE;gBAC1B,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;aACzB;iBAAM;gBACL,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;aAChE;YAED,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,KAAK,EAAE;gBACT,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;aACzB;QACH,CAAC,EACD,eAAK;YACH,6CAA6C;YAC7C,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,KAAI,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC;QACtD,CAAC,CACF,CAAC;IACJ,CAAC;IACD,qCAAQ,GAAR,UAAS,KAAK;QACZ,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,YAAY,EAAE;YACnC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC9B;IACH,CAAC;IACD,wCAAW,GAAX,UAAY,UAAU;QACpB,yGAAyG;QACzG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,oCAAoC,GAAG,UAAU,CAAC;IAC9E,CAAC;IAhGU,kBAAkB;QAL9B,+DAAS,CAAC;YACT,QAAQ,EAAE,qBAAqB;YAC/B,wIAA0C;;SAE3C,CAAC;+EAUmB,sDAAO;YACH,yEAAY;YACT,6EAAc;YACR,2FAAoB;YACpB,oEAAqB;YAC3B,6EAAc;YACtB,sDAAM;OAfb,kBAAkB,CAkG9B;IAAD,yBAAC;CAAA;AAlG8B","file":"booking-history-booking-history-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BookingHistoryPage } from './booking-history.page';\nimport { ComponentsModule } from \"../../../core/components/components.module\";\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BookingHistoryPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    FontAwesomeModule\n  ],\n  declarations: [BookingHistoryPage]\n})\nexport class BookingHistoryPageModule {}\n","module.exports = \"<app-header></app-header>\\n<ion-progress-bar type=\\\"indeterminate\\\" class=\\\"progress_bar\\\" *ngIf=\\\"progress_bar\\\"></ion-progress-bar>\\n<ion-content>\\n  <!-- <div slot=\\\"fixed\\\">\\n    <ion-card style=\\\"margin: 0px;border-radius: 0px;\\\">\\n      \\n      <ion-item lines=\\\"none\\\">\\n        <p class=\\\"no_margin_p\\\" slot=\\\"start\\\">Recent Bookings</p>\\n        <ion-chip slot=\\\"end\\\" color=\\\"tertiary\\\" outline=\\\"true\\\" (click)=\\\"filterTransactions()\\\">Filter<ion-icon name=\\\"ios-options\\\" ></ion-icon></ion-chip>\\n      </ion-item>\\n    </ion-card>\\n  </div> -->\\n  <!-- <div style=\\\"margin-top: 60px;\\\"> -->\\n    <div>\\n      <ion-virtual-scroll [items]=\\\"transactionList\\\">\\n        <ion-card style=\\\"margin:0px 0px 5px 0;border-radius: 0px;\\\" *virtualItem=\\\"let item\\\" (click)=\\\"openBooking(item.booking_id)\\\">\\n          <ion-item lines=\\\"none\\\">\\n            <ion-label>\\n              <div>\\n              <ion-img src=\\\"./assets/svg/my_ride.svg\\\" style=\\\"width: 35px;float: left;margin-right: 10px;\\\"></ion-img>\\n              <h2 style=\\\"font-size: 14px;float: left;\\\">{{item.booking_date}}&nbsp;,&nbsp;{{item.booking_time}}</h2>\\n              <h2 style=\\\"font-size: 14px;float: right;\\\">\\n              <fa-icon [icon]=\\\"['fas','rupee-sign']\\\" style=\\\"opacity: 0.6;font-size: 13px;\\n                margin-right: 2px;\\\"></fa-icon>{{item.paid_amount}}</h2>\\n              </div>\\n              <h6 style=\\\"clear: both;margin-left: 46px;font-size: 12px;\\\">{{item.car_name}} &nbsp; {{item.car_no}}</h6>\\n              <div>\\n                <div style=\\\"margin-left: 44px;float: left;width: 70%;\\\">\\n                  <div class=\\\"div_elipse_class\\\" style=\\\"margin-top: 10px;\\\">\\n                    <ion-icon name=\\\"locate\\\" style=\\\"font-size: 16px;float: left;\\\"color=\\\"success\\\"></ion-icon>\\n                    <p style=\\\"margin:0px;opacity: 0.7;font-size: 13px;\\\">&nbsp;{{item.stoppage_start}}</p>\\n                  </div>\\n                  <ion-icon name=\\\"more\\\" style=\\\"opacity: 0.5;\\\"></ion-icon>\\n                  <div class=\\\"div_elipse_class\\\">\\n                    <ion-icon name=\\\"locate\\\" style=\\\"font-size: 16px;float: left;\\\" color=\\\"danger\\\"></ion-icon>\\n                    <p style=\\\"margin:0px;opacity: 0.7;font-size: 13px;\\\">&nbsp;{{item.stoppage_end}}</p>\\n                  </div>\\n                </div>\\n                <div style=\\\"float: right;\\\">\\n                  <ion-avatar slot=\\\"start\\\" style=\\\"height: 50px;width: 50px;margin-top: 10px;\\\">\\n                    <img src = \\\"{{item.driver_photo}}\\\" alt=\\\"\\\" />\\n                  </ion-avatar> \\n                </div>\\n              </div>\\n            </ion-label>\\n          </ion-item>\\n          </ion-card>\\n      </ion-virtual-scroll>\\n      <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\" position=\\\"top\\\">\\n        <ion-infinite-scroll-content\\n          loadingSpinner=\\\"bubbles\\\"\\n          loadingText=\\\"Loading more data...\\\">\\n        </ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n    </div>\\n</ion-content>\\n\"","module.exports = \"ion-item {\\n  --background:#ffffff; }\\n\\n.card-class {\\n  margin: 5px 0 0 0 !important; }\\n\\n.inner_div_history {\\n  margin-top: 60px !important; }\\n\\n.div_elipse_class {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis; }\\n\\n.p_location {\\n  margin: 0 0 0 0px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3ByaXlhbS9Eb2N1bWVudHMvUmVkeVJpZGVyL3NyYy9hcHAvbGF5b3V0L215YWNjb3VudC9ib29raW5nLWhpc3RvcnkvYm9va2luZy1oaXN0b3J5LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG9CQUFhLEVBQUE7O0FBRWpCO0VBQ0ksNEJBQTRCLEVBQUE7O0FBRWhDO0VBQ0ksMkJBQTBCLEVBQUE7O0FBRTdCO0VBQ0csbUJBQW1CO0VBQ25CLGdCQUFnQjtFQUNoQix1QkFBdUIsRUFBQTs7QUFFMUI7RUFFRyxpQkFBaUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2xheW91dC9teWFjY291bnQvYm9va2luZy1oaXN0b3J5L2Jvb2tpbmctaGlzdG9yeS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbXtcbiAgICAtLWJhY2tncm91bmQ6I2ZmZmZmZjtcbn1cbi5jYXJkLWNsYXNze1xuICAgIG1hcmdpbjogNXB4IDAgMCAwICFpbXBvcnRhbnQ7XG59XG4uaW5uZXJfZGl2X2hpc3Rvcnl7XG4gICAgbWFyZ2luLXRvcDo2MHB4ICFpbXBvcnRhbnQ7XG4gfVxuIC5kaXZfZWxpcHNlX2NsYXNze1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiB9XG4gLnBfbG9jYXRpb257XG4gICAgLy8gdGV4dC1hbGlnbjogbGVmdDtcbiAgICBtYXJnaW46IDAgMCAwIDBweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { RouteStoppageModalPage } from '../../office-pool-car-service/route-stoppage-modal/route-stoppage-modal.page';\nimport { ModalService } from '../../../core/services/modal.service';\nimport { ToasterService } from '../../../core/services/toaster.service';\nimport { OfficePoolCarService } from '../../../core/services/office-pool-car.service';\nimport { ActionSheetController } from '@ionic/angular';\nimport { LoadingService } from '../../../core/services/loading.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-booking-history',\n  templateUrl: './booking-history.page.html',\n  styleUrls: ['./booking-history.page.scss'],\n})\nexport class BookingHistoryPage implements OnInit {\n  filter: string;\n  actionSheet: any;\n  userId: string;\n  page = 1;\n  maximumPages = 10;\n  transactionList = [];\n  progress_bar: boolean = false;\n  constructor(\n    private storage: Storage,\n    public modalService: ModalService,\n    private toasterService: ToasterService,\n    private officePoolCarService: OfficePoolCarService,\n    public actionSheetController: ActionSheetController,\n    private loadingService: LoadingService,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.storage.get('USER_INFO').then((val) => {\n      //console.log('USER_INFO', val);\n      this.userId = val['id'];\n      this.getTransactionHistory();\n\n    });\n  }\n  filterTransactions() {\n    this.actionSheet = this.actionSheetController.create({\n      header: 'Filter Transactions',\n      buttons: [\n        {\n          text: 'All',\n          handler: () => {\n            this.filter = '';\n            this.getTransactionHistory();\n          }\n        },\n        {\n          text: 'Paid',\n          handler: () => {\n            this.filter = '2';\n            this.getTransactionHistory();\n          }\n        }, {\n          text: 'Cancelled',\n          handler: () => {\n            this.filter = '3';\n            this.getTransactionHistory();\n          }\n        }]\n    }).then(actionsheet => {\n      actionsheet.present();\n    });\n\n  }\n  getTransactionHistory(event?) {\n    this.progress_bar = true;\n    let request_data = {\n      \"type\": \"booking_list\",\n      \"user_id\": this.userId,\n      \"filter_by\": this.filter,\n      \"page\": this.page,\n      \"count\": 6,\n\n    };\n    this.officePoolCarService.applyCouponService(request_data).subscribe(\n      res => {\n        //console.log('this.transactionList', res.result['payment_history'].length);\n        if (res.result.length == 0) {\n          event.target.complete();\n        } else {\n          this.transactionList = this.transactionList.concat(res.result);\n        }\n\n        this.progress_bar = false;\n        if (event) {\n          event.target.complete();\n        }\n      },\n      error => {\n        //console.log(\"error::::\" + error.error.msg);\n        this.progress_bar = false;\n        this.toasterService.showToast(error.error.msg, 2000)\n      }\n    );\n  }\n  loadData(event) {\n    this.page++;\n    this.getTransactionHistory(event);\n    if (this.page === this.maximumPages) {\n      event.target.disabled = true;\n    }\n  }\n  openBooking(booking_id) {\n    //let data = { 'from_which_page': 'my-booking-history', 'userId': this.userId, 'booking_id': booking_id }\n    this.router.navigateByUrl('myaccount/booking-history-details/' + booking_id)\n  }\n\n}\n"],"sourceRoot":""}